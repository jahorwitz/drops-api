// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource mysql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "mysql"
}

generator client {
  provider = "prisma-client-js"
}

model Activity {
  id            String    @id @default(uuid())
  name          String    @default("")
  amount        Int?      @default(0)
  unitOfMeasure String    @default("")
  startTime     DateTime  @default(now()) @updatedAt @map("my_start_timestamp")
  endTime       DateTime? @default(now()) @updatedAt @map("my_end_timestamp")
  user          User?     @relation("Activity_user", fields: [userId], references: [id])
  userId        String?   @map("userid")

  @@index([userId])
}

model Goal {
  id            String       @id @default(uuid())
  type          GoalTypeType @map("my_select")
  name          String       @default("")
  amount        Int
  unitOfMeasure String       @default("")
  daysOfWeek    Json         @default("[]") @map("my_multiselect")
  user          User?        @relation("Goal_user", fields: [userId], references: [id])
  userId        String?      @map("user")

  @@index([type])
  @@index([userId])
}

model Medication {
  id            String  @id @default(uuid())
  name          String  @default("")
  amount        Int
  unitOfMeasure String  @default("")
  time          String  @default("")
  user          User?   @relation("Medication_user", fields: [userId], references: [id])
  userId        String? @map("user")

  @@index([userId])
}

model Notification {
  id     String               @id @default(uuid())
  type   NotificationTypeType @map("my_select")
  name   String               @default("")
  days   Json                 @default("[\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\",\"Sunday\"]")
  user   User?                @relation("Notification_user", fields: [userId], references: [id])
  userId String?              @map("user")
  times  NotificationTime[]   @relation("NotificationTime_notification")

  @@index([type])
  @@index([userId])
}

model NotificationTime {
  id               String        @id @default(uuid())
  notificationTime String        @default("")
  status           String?       @default("new")
  createdAt        DateTime?     @default(now())
  archivedAt       DateTime?     @default(now())
  notification     Notification? @relation("NotificationTime_notification", fields: [notificationId], references: [id])
  notificationId   String?       @map("notification")

  @@index([notificationId])
}

model User {
  id                        String         @id @default(uuid())
  name                      String         @default("")
  email                     String         @unique @default("")
  password                  String
  createdAt                 DateTime?      @default(now())
  lastLoginDate             DateTime?      @default(now())
  dateOfBirth               DateTime?
  weight                    Int?
  height                    Int?
  fastingBloodSugarMin      Int            @default(70)
  fastingBloodSugarMax      Int            @default(100)
  postprandialBloodSugarMin Int            @default(100)
  postprandialBloodSugarMax Int            @default(180)
  dietMeals                 Int?           @default(3)
  dietSnacks                Int?           @default(2)
  dietCarbs                 Int?           @default(200)
  dietFiber                 Int?           @default(25)
  dietWater                 Int?           @default(8)
  dietCalories              Int?           @default(2500)
  sex                       String?
  diabetesType              Json           @default("[]")
  goals                     Goal[]         @relation("Goal_user")
  notifications             Notification[] @relation("Notification_user")
  activities                Activity[]     @relation("Activity_user")
  medications               Medication[]   @relation("Medication_user")
}

enum GoalTypeType {
  Exercise
  Diet
}

enum NotificationTypeType {
  Activity
  Diet
  Glucose
  Medication
  other
}
